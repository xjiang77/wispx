<mxGraphModel dx="0" dy="0" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1000">
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>
    
    <!-- Title -->
    <mxCell id="title" value="Clawdbot Agent-Centric System Architecture v6.1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=24;fontStyle=1;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="500" y="20" width="800" height="40" as="geometry"/>
    </mxCell>
    
    <!-- ==================== ENTRY LAYER (蓝色 - 左侧) ==================== -->
    <mxCell id="entry-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C6DAFC;strokeColor=#1A73E8;strokeWidth=1;arcSize=3;" vertex="1" parent="1">
      <mxGeometry x="40" y="80" width="280" height="860" as="geometry"/>
    </mxCell>
    <mxCell id="entry-title" value="ENTRY LAYER&#xa;(入口层)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="40" y="90" width="280" height="40" as="geometry"/>
    </mxCell>
    
    <!-- Entry - Messaging Channels (垂直排列) -->
    <mxCell id="msg-label" value="Messaging Channels" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="140" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="telegram" value="Telegram" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="165" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="discord" value="Discord" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="165" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="slack" value="Slack" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="210" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="signal" value="Signal" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="210" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="whatsapp" value="WhatsApp" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="255" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="imessage" value="iMessage" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="255" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="msteams" value="MS Teams" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="300" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="matrix" value="Matrix" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="300" width="120" height="35" as="geometry"/>
    </mxCell>
    
    <!-- Entry - Native UIs -->
    <mxCell id="native-label" value="Native Interfaces" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="355" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="web-ui" value="Web UI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="380" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="cli" value="CLI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="380" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="mac-app" value="Mac App" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="425" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="mobile" value="Mobile Apps" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="425" width="120" height="35" as="geometry"/>
    </mxCell>
    
    <!-- Entry - Other -->
    <mxCell id="other-label" value="Other Inputs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="480" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="voice" value="Voice (Siri/Wake)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="505" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="api" value="HTTP API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="505" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="hooks" value="Hooks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="55" y="550" width="120" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="cron" value="Scheduled Tasks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" vertex="1" parent="1">
      <mxGeometry x="185" y="550" width="120" height="35" as="geometry"/>
    </mxCell>
    
    <!-- ==================== GATEWAY LAYER (黄色) ==================== -->
    <mxCell id="gateway-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FEEFC3;strokeColor=#E37400;strokeWidth=1;arcSize=3;" vertex="1" parent="1">
      <mxGeometry x="340" y="80" width="280" height="860" as="geometry"/>
    </mxCell>
    <mxCell id="gateway-title" value="GATEWAY LAYER&#xa;(网关层)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="340" y="90" width="280" height="40" as="geometry"/>
    </mxCell>
    
    <!-- Gateway - Network Stack -->
    <mxCell id="net-label" value="Network Stack" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="355" y="140" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="ws-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FDE293;strokeColor=#E37400;strokeWidth=1;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="355" y="165" width="250" height="100" as="geometry"/>
    </mxCell>
    <mxCell id="ws-handlers" value="WebSocket Handlers" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="365" y="175" width="230" height="25" as="geometry"/>
    </mxCell>
    <mxCell id="http-api" value="HTTP API :18789" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="365" y="205" width="230" height="25" as="geometry"/>
    </mxCell>
    <mxCell id="routing" value="Routing &amp; Load Balancing" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="365" y="235" width="230" height="25" as="geometry"/>
    </mxCell>
    
    <!-- Gateway - Deployment -->
    <mxCell id="deploy-label" value="Deployment Modes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="355" y="280" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="deploy-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FDE293;strokeColor=#E37400;strokeWidth=1;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="355" y="305" width="250" height="85" as="geometry"/>
    </mxCell>
    <mxCell id="local-deploy" value="LOCAL&#xa;localhost:18789" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="365" y="315" width="110" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="remote-deploy" value="REMOTE&#xa;0.0.0.0:18789" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="485" y="315" width="110" height="35" as="geometry"/>
    </mxCell>
    <mxCell id="tailscale" value="Tailscale (serve | funnel)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="365" y="355" width="230" height="30" as="geometry"/>
    </mxCell>
    
    <!-- Gateway - Services -->
    <mxCell id="svc-label" value="Core Services" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="355" y="405" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="auth-security" value="Auth &amp; Security&#xa;(Token/JWT/Allowlist)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="355" y="430" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="msg-queue" value="Message Queue&#xa;(Async)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="485" y="430" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="media-pipeline" value="Media Pipeline&#xa;(Image/Audio/Video)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="355" y="485" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="session-store" value="Session Store&#xa;(SQLite/File)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="485" y="485" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="node-mgmt" value="Node Mgmt&#xa;(Multi-node)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="355" y="540" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="config-mgr" value="Config Mgr&#xa;(Settings)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;" vertex="1" parent="1">
      <mxGeometry x="485" y="540" width="120" height="45" as="geometry"/>
    </mxCell>
    
    <!-- ==================== AGENT LAYER (绿色 - 核心) ==================== -->
    <mxCell id="agent-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
      <mxGeometry x="640" y="80" width="560" height="860" as="geometry"/>
    </mxCell>
    <mxCell id="agent-title" value="AGENT LAYER (代理层 - 架构核心)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="640" y="90" width="560" height="40" as="geometry"/>
    </mxCell>
    
    <!-- Agent - State Management -->
    <mxCell id="state-label" value="State Management" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="140" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="session" value="Session&#xa;(短期记忆)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="165" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="memory" value="Memory&#xa;(长期记忆)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="790" y="165" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="context-mgmt" value="Context Mgmt&#xa;(Window/Summary)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="920" y="165" width="120" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="guardrails" value="Guardrails&#xa;(Safety)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="1050" y="165" width="120" height="45" as="geometry"/>
    </mxCell>
    
    <!-- Agent - LLM Orchestration -->
    <mxCell id="llm-label" value="LLM Orchestration" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="225" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="llm-orch" value="Provider Router | Streaming | Model Selection | Fallback" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="250" width="510" height="40" as="geometry"/>
    </mxCell>
    
    <!-- Agent - Agentic Loop -->
    <mxCell id="loop-label" value="Agent Runtime (Agentic Loop)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="305" width="250" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="loop-scenario" value="场景: &quot;帮我生成一个项目进度 PPT&quot;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontStyle=2;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="325" width="300" height="18" as="geometry"/>
    </mxCell>
    <mxCell id="loop-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#188038;strokeWidth=1;arcSize=3;dashed=1;" vertex="1" parent="1">
      <mxGeometry x="660" y="348" width="510" height="140" as="geometry"/>
    </mxCell>
    
    <!-- Loop Steps (水平排列) -->
    <mxCell id="step1" value="1. 理解意图&#xa;Analyze&#xa;分析 → 需要 /pptx" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="675" y="360" width="110" height="60" as="geometry"/>
    </mxCell>
    <mxCell id="step2" value="2. 调用工具&#xa;Request&#xa;{ skill: &quot;pptx&quot; }" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="800" y="360" width="110" height="60" as="geometry"/>
    </mxCell>
    <mxCell id="step3" value="3. 执行工具&#xa;Execute&#xa;验证 + 执行" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="925" y="360" width="110" height="60" as="geometry"/>
    </mxCell>
    <mxCell id="step4" value="4. 返回/继续&#xa;Return/Loop&#xa;循环或回复" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="1050" y="360" width="110" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Loop Arrows -->
    <mxCell id="arrow1" value="" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" edge="1" parent="1" source="step1" target="step2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="arrow2" value="" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" edge="1" parent="1" source="step2" target="step3">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="arrow3" value="" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" edge="1" parent="1" source="step3" target="step4">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- Loop Back Arrow -->
    <mxCell id="loop-back" value="循环" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;curved=1;dashed=1;" edge="1" parent="1">
      <mxGeometry relative="1" as="geometry">
        <mxPoint x="1105" y="425" as="sourcePoint"/>
        <mxPoint x="730" y="425" as="targetPoint"/>
        <Array as="points">
          <mxPoint x="1105" y="470"/>
          <mxPoint x="900" y="475"/>
          <mxPoint x="730" y="470"/>
        </Array>
      </mxGeometry>
    </mxCell>
    
    <!-- Agent - Tools -->
    <mxCell id="tools-label" value="TOOLS (工具层)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="505" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="tools-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="660" y="530" width="510" height="70" as="geometry"/>
    </mxCell>
    <mxCell id="tools-items" value="File Ops  |  Browser  |  Shell  |  MCP Tools (Calendar, Database, etc.)&#xa;Tool Executor: 验证 → 执行 → 格式化返回 → 错误处理 &amp; 重试" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="670" y="540" width="490" height="50" as="geometry"/>
    </mxCell>
    
    <!-- Agent - Skills -->
    <mxCell id="skills-label" value="SKILLS (技能系统)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="615" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="skills-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="660" y="640" width="510" height="70" as="geometry"/>
    </mxCell>
    <mxCell id="skills-items" value="文档: /pptx  /pdf  /docx  |  代码: /commit  /review-pr  |  测试: /test  /deploy&#xa;Skill Loader: 动态加载 → MCP Client 连接外部服务" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="670" y="650" width="490" height="50" as="geometry"/>
    </mxCell>
    
    <!-- Agent - Extensions -->
    <mxCell id="ext-label" value="Extensions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="725" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="hooks-plugins" value="Hooks &amp; Plugins&#xa;(Extension Points)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="660" y="750" width="160" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="agent-commands" value="Agent Commands&#xa;(Built-in Actions)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="835" y="750" width="160" height="45" as="geometry"/>
    </mxCell>
    <mxCell id="persona" value="Persona &amp; Config&#xa;(System Prompt)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" vertex="1" parent="1">
      <mxGeometry x="1010" y="750" width="160" height="45" as="geometry"/>
    </mxCell>
    
    <!-- ==================== EXTERNAL + INFRA (右侧) ==================== -->
    <mxCell id="external-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAD2CF;strokeColor=#C5221F;strokeWidth=1;arcSize=3;" vertex="1" parent="1">
      <mxGeometry x="1220" y="80" width="200" height="500" as="geometry"/>
    </mxCell>
    <mxCell id="external-title" value="EXTERNAL&#xa;(外部服务)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1220" y="90" width="200" height="40" as="geometry"/>
    </mxCell>
    
    <!-- External - LLM Providers -->
    <mxCell id="llm-providers-label" value="LLM Providers" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="140" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="anthropic" value="Anthropic (Claude)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="165" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="openai" value="OpenAI (GPT)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="200" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="google" value="Google (Gemini)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="235" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="deepseek" value="DeepSeek" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="270" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="ollama" value="Ollama (Local)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="305" width="170" height="30" as="geometry"/>
    </mxCell>
    
    <!-- External - Services -->
    <mxCell id="ext-svc-label" value="External Services" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="350" width="150" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="mcp-servers" value="MCP Servers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="375" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="webhooks" value="Webhooks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="410" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="third-party" value="Third-party APIs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" vertex="1" parent="1">
      <mxGeometry x="1235" y="445" width="170" height="30" as="geometry"/>
    </mxCell>
    
    <!-- Infrastructure -->
    <mxCell id="infra-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F3F4;strokeColor=#5F6368;strokeWidth=1;arcSize=3;" vertex="1" parent="1">
      <mxGeometry x="1220" y="600" width="200" height="340" as="geometry"/>
    </mxCell>
    <mxCell id="infra-title" value="INFRASTRUCTURE&#xa;(基础设施)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1220" y="610" width="200" height="40" as="geometry"/>
    </mxCell>
    
    <mxCell id="sqlite" value="SQLite (Data)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1235" y="660" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="filesystem" value="FileSystem (Storage)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1235" y="695" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="config" value="Config (Settings)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1235" y="730" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="logging" value="Logging (Unified)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1235" y="765" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="cache" value="Cache (Memory)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1235" y="800" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="processes" value="Process (Spawn/IPC)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1235" y="835" width="170" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="crypto" value="Crypto (Keys)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" vertex="1" parent="1">
      <mxGeometry x="1235" y="870" width="170" height="30" as="geometry"/>
    </mxCell>
    
    <!-- ==================== LAYER CONNECTIONS ==================== -->
    <!-- Entry → Gateway -->
    <mxCell id="conn-entry-gw" value="" style="endArrow=classic;html=1;strokeColor=#1A73E8;strokeWidth=1.5;" edge="1" parent="1">
      <mxGeometry relative="1" as="geometry">
        <mxPoint x="320" y="400" as="sourcePoint"/>
        <mxPoint x="340" y="400" as="targetPoint"/>
      </mxGeometry>
    </mxCell>
    
    <!-- Gateway → Agent -->
    <mxCell id="conn-gw-agent" value="" style="endArrow=classic;html=1;strokeColor=#E37400;strokeWidth=1.5;" edge="1" parent="1">
      <mxGeometry relative="1" as="geometry">
        <mxPoint x="620" y="400" as="sourcePoint"/>
        <mxPoint x="640" y="400" as="targetPoint"/>
      </mxGeometry>
    </mxCell>
    
    <!-- Agent → External -->
    <mxCell id="conn-agent-ext" value="" style="endArrow=classic;startArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;" edge="1" parent="1">
      <mxGeometry relative="1" as="geometry">
        <mxPoint x="1200" y="300" as="sourcePoint"/>
        <mxPoint x="1220" y="300" as="targetPoint"/>
      </mxGeometry>
    </mxCell>
    
    <!-- Agent → Infrastructure -->
    <mxCell id="conn-agent-infra" value="" style="endArrow=classic;startArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;" edge="1" parent="1">
      <mxGeometry relative="1" as="geometry">
        <mxPoint x="1200" y="750" as="sourcePoint"/>
        <mxPoint x="1220" y="750" as="targetPoint"/>
      </mxGeometry>
    </mxCell>
    
    <!-- ==================== VERSION INFO ==================== -->
    <mxCell id="version" value="v6.1 Agent-Centric Architecture  |  Clawdbot  |  2025-01" style="text;html=1;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;fontSize=10;fontColor=#5F6368;" vertex="1" parent="1">
      <mxGeometry x="1100" y="950" width="360" height="20" as="geometry"/>
    </mxCell>
    
  </root>
</mxGraphModel>