<mxfile host="embed.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" version="29.3.4">
  <diagram id="NBJSTwo79cgow8KJ2n-1" name="Page-1">
    <mxGraphModel dx="3226" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="entry-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C6DAFC;strokeColor=#1A73E8;strokeWidth=1;arcSize=3;" value="" vertex="1">
          <mxGeometry height="555" width="190" x="-10" y="90" as="geometry" />
        </mxCell>
        <mxCell id="msg-container" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#1A73E8;strokeWidth=1;dashed=1;arcSize=5;" value="" vertex="1">
          <mxGeometry height="180" width="160" y="140" as="geometry" />
        </mxCell>
        <mxCell id="native-container" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#1A73E8;strokeWidth=1;dashed=1;arcSize=5;" value="" vertex="1">
          <mxGeometry height="145" width="160" y="325" as="geometry" />
        </mxCell>
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=24;fontStyle=1;fontColor=#202124;" value="Clawdbot Agent-Centric System Architecture v6.1" vertex="1">
          <mxGeometry height="40" width="800" x="500" y="20" as="geometry" />
        </mxCell>
        <mxCell id="entry-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#0D47A1;" value="ENTRY LAYER (入口层)" vertex="1">
          <mxGeometry height="40" width="160" y="100" as="geometry" />
        </mxCell>
        <mxCell id="msg-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0D47A1;" value="Messaging Channels" vertex="1">
          <mxGeometry height="20" width="150" x="10" y="145" as="geometry" />
        </mxCell>
        <mxCell id="telegram" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="Telegram" vertex="1">
          <mxGeometry height="30" width="130" x="10" y="170" as="geometry" />
        </mxCell>
        <mxCell id="discord" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="Discord" vertex="1">
          <mxGeometry height="30" width="130" x="10" y="205" as="geometry" />
        </mxCell>
        <mxCell id="whatsapp" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="WhatsApp" vertex="1">
          <mxGeometry height="30" width="130" x="10" y="240" as="geometry" />
        </mxCell>
        <mxCell id="imessage" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="Signal / iMessage / Slack / ..." vertex="1">
          <mxGeometry height="30" width="130" x="10" y="275" as="geometry" />
        </mxCell>
        <mxCell id="native-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0D47A1;" value="Native Interfaces" vertex="1">
          <mxGeometry height="20" width="150" x="10" y="330" as="geometry" />
        </mxCell>
        <mxCell id="web-ui" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="Web UI" vertex="1">
          <mxGeometry height="30" width="140" x="10" y="355" as="geometry" />
        </mxCell>
        <mxCell id="cli" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="CLI" vertex="1">
          <mxGeometry height="30" width="140" x="10" y="390" as="geometry" />
        </mxCell>
        <mxCell id="other-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0D47A1;" value="Other Inputs" vertex="1">
          <mxGeometry height="20" width="150" x="10" y="480" as="geometry" />
        </mxCell>
        <mxCell id="voice" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="Voice (Siri/Wake)" vertex="1">
          <mxGeometry height="30" width="140" x="10" y="505" as="geometry" />
        </mxCell>
        <mxCell id="api" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="HTTP API" vertex="1">
          <mxGeometry height="30" width="140" x="10" y="540" as="geometry" />
        </mxCell>
        <mxCell id="gateway-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FEEFC3;strokeColor=#E37400;strokeWidth=1;arcSize=3;" value="" vertex="1">
          <mxGeometry height="440" width="260" x="220" y="95" as="geometry" />
        </mxCell>
        <mxCell id="gateway-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#5D4200;" value="GATEWAY LAYER (网关层)" vertex="1">
          <mxGeometry height="40" width="220" x="225" y="105" as="geometry" />
        </mxCell>
        <mxCell id="local-deploy" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;align=center;verticalAlign=top;spacingTop=5;" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;LOCAL MODE &lt;br&gt;&amp;nbsp; &amp;nbsp; (本地模式)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;br&gt;&amp;nbsp;宿主: localhost&lt;br&gt;端口:18789" vertex="1">
          <mxGeometry height="150" width="65" x="235" y="175" as="geometry" />
        </mxCell>
        <mxCell id="remote-deploy" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=10;fontColor=#5D4200;align=center;verticalAlign=top;spacingTop=5;" value="REMOTE MODE &lt;br&gt;(远程模式)&lt;div&gt;&amp;nbsp; &lt;br&gt;&amp;nbsp;宿主:&amp;nbsp;&lt;br&gt;腾讯云&lt;/div&gt;&lt;div&gt;CVM/lighthouse&lt;br&gt;端口:18789&lt;/div&gt;" vertex="1">
          <mxGeometry height="165" width="65" x="235" y="335" as="geometry" />
        </mxCell>
        <mxCell id="tailscale" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=11;fontColor=#5D4200;align=center;verticalAlign=middle;" value="TAIL&lt;br&gt;SCALE&lt;br&gt;&amp;nbsp;VPN连接 &lt;br&gt;内网连接" vertex="1">
          <mxGeometry height="330" width="50" x="310" y="175" as="geometry" />
        </mxCell>
        <mxCell id="auth-security" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=11;fontColor=#5D4200;align=center;verticalAlign=middle;" value="HTTP API (REST) :18789" vertex="1">
          <mxGeometry height="70" width="90" x="370" y="260" as="geometry" />
        </mxCell>
        <mxCell id="msg-queue" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=11;fontColor=#5D4200;align=center;verticalAlign=middle;" value="WebSocket Handlers &lt;br&gt;(实时消息)" vertex="1">
          <mxGeometry height="70" width="90" x="370" y="175" as="geometry" />
        </mxCell>
        <mxCell id="media-pipeline" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=11;fontColor=#5D4200;align=center;verticalAlign=middle;" value="Node Management &lt;br&gt;(设备管理)" vertex="1">
          <mxGeometry height="70" width="90" x="370" y="350" as="geometry" />
        </mxCell>
        <mxCell id="node-mgmt" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E37400;strokeWidth=1;fontSize=11;fontColor=#5D4200;align=center;verticalAlign=middle;" value="Cron Jobs &lt;br&gt;(定时任务)" vertex="1">
          <mxGeometry height="70" width="90" x="370" y="435" as="geometry" />
        </mxCell>
        <mxCell id="agent-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=3;arcSize=3;shadow=1;" value="" vertex="1">
          <mxGeometry height="650" width="620" x="520" y="80" as="geometry" />
        </mxCell>
        <mxCell id="agent-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=16;fontStyle=1;fontColor=#0B5323;" value="AGENT LAYER (代理层 - 架构核心)" vertex="1">
          <mxGeometry height="40" width="620" x="520" y="90" as="geometry" />
        </mxCell>
        <mxCell id="state-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" value="State Management" vertex="1">
          <mxGeometry height="20" width="150" x="540" y="215" as="geometry" />
        </mxCell>
        <mxCell id="session" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Session (短期记忆)" vertex="1">
          <mxGeometry height="45" width="135" x="540" y="240" as="geometry" />
        </mxCell>
        <mxCell id="memory" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Memory (长期记忆)" vertex="1">
          <mxGeometry height="45" width="135" x="685" y="240" as="geometry" />
        </mxCell>
        <mxCell id="context-mgmt" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Context Mgmt (Window/Summary)" vertex="1">
          <mxGeometry height="45" width="135" x="830" y="240" as="geometry" />
        </mxCell>
        <mxCell id="guardrails" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Guardrails (Safety)" vertex="1">
          <mxGeometry height="45" width="135" x="975" y="240" as="geometry" />
        </mxCell>
        <mxCell id="llm-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" value="LLM Orchestration" vertex="1">
          <mxGeometry height="20" width="150" x="540" y="130" as="geometry" />
        </mxCell>
        <mxCell id="llm-orch" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Provider Router | Streaming | Model Selection | Fallback" vertex="1">
          <mxGeometry height="40" width="580" x="540" y="155" as="geometry" />
        </mxCell>
        <mxCell id="loop-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" value="Agent Runtime (Agentic Loop/Pi-Agent)" vertex="1">
          <mxGeometry height="20" width="250" x="540" y="305" as="geometry" />
        </mxCell>
        <mxCell id="loop-scenario" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontStyle=2;fontColor=#0B5323;" value="场景: &quot;帮我生成一个项目进度 PPT&quot;" vertex="1">
          <mxGeometry height="18" width="300" x="540" y="325" as="geometry" />
        </mxCell>
        <mxCell id="loop-container" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#188038;strokeWidth=1;arcSize=3;dashed=1;" value="" vertex="1">
          <mxGeometry height="140" width="580" x="540" y="348" as="geometry" />
        </mxCell>
        <mxCell id="step1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" value="1. 理解意图 Analyze 分析 → 需要 /pptx" vertex="1">
          <mxGeometry height="60" width="125" x="555" y="360" as="geometry" />
        </mxCell>
        <mxCell id="step2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" value="2. 调用工具 Request { skill: &quot;pptx&quot; }" vertex="1">
          <mxGeometry height="60" width="125" x="695" y="360" as="geometry" />
        </mxCell>
        <mxCell id="step3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" value="3. 执行工具 Execute 验证 + 执行" vertex="1">
          <mxGeometry height="60" width="125" x="835" y="360" as="geometry" />
        </mxCell>
        <mxCell id="step4" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CEEAD6;strokeColor=#188038;strokeWidth=1;fontSize=9;fontColor=#0B5323;" value="4. 返回/继续 Return/Loop 循环或回复" vertex="1">
          <mxGeometry height="60" width="125" x="975" y="360" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" edge="1" parent="1" source="step1" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" target="step2" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" edge="1" parent="1" source="step2" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" target="step3" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" edge="1" parent="1" source="step3" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" target="step4" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="loop-back" edge="1" parent="1" style="endArrow=classic;html=1;strokeColor=#188038;strokeWidth=1.5;curved=1;dashed=1;" value="循环">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1105" y="470" />
              <mxPoint x="900" y="475" />
              <mxPoint x="730" y="470" />
            </Array>
            <mxPoint x="1105" y="425" as="sourcePoint" />
            <mxPoint x="730" y="425" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tools-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" value="TOOLS (工具层)" vertex="1">
          <mxGeometry height="20" width="150" x="540" y="505" as="geometry" />
        </mxCell>
        <mxCell id="tools-container" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;arcSize=5;" value="" vertex="1">
          <mxGeometry height="70" width="280" x="540" y="530" as="geometry" />
        </mxCell>
        <mxCell id="tools-items" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontColor=#0B5323;" value="File Ops  |  Browser  |  Shell  | &lt;br&gt;&amp;nbsp;MCP Tools (Calendar, Database, etc.)&lt;br&gt;Tool Executor: 验证 → 执行 → &lt;br&gt;格式化返回 → 错误处理 &amp;amp; 重试" vertex="1">
          <mxGeometry height="50" width="200" x="550" y="540" as="geometry" />
        </mxCell>
        <mxCell id="skills-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" value="SKILLS (技能系统)" vertex="1">
          <mxGeometry height="20" width="150" x="840" y="505" as="geometry" />
        </mxCell>
        <mxCell id="skills-container" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;arcSize=5;" value="" vertex="1">
          <mxGeometry height="70" width="280" x="830" y="530" as="geometry" />
        </mxCell>
        <mxCell id="skills-items" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontColor=#0B5323;" value="文档: /pptx  /pdf  /docx  |  代码: /commit  /review-pr&lt;br&gt;测试: /test  /deploy&lt;br&gt;Skill Loader: 动态加载 → MCP Client 连接外部服务" vertex="1">
          <mxGeometry height="50" width="260" x="840" y="540" as="geometry" />
        </mxCell>
        <mxCell id="ext-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0B5323;" value="Extensions" vertex="1">
          <mxGeometry height="20" width="150" x="540" y="620" as="geometry" />
        </mxCell>
        <mxCell id="hooks-plugins" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Hooks &amp; Plugins (Extension Points)" vertex="1">
          <mxGeometry height="45" width="180" x="540" y="645" as="geometry" />
        </mxCell>
        <mxCell id="agent-commands" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Agent Commands (Built-in Actions)" vertex="1">
          <mxGeometry height="45" width="180" x="730" y="645" as="geometry" />
        </mxCell>
        <mxCell id="persona" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A8DAB5;strokeColor=#188038;strokeWidth=1;fontSize=10;fontColor=#0B5323;" value="Persona &amp; Config (System Prompt)" vertex="1">
          <mxGeometry height="45" width="180" x="920" y="645" as="geometry" />
        </mxCell>
        <mxCell id="external-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAD2CF;strokeColor=#C5221F;strokeWidth=1;arcSize=3;" value="" vertex="1">
          <mxGeometry height="650" width="180" x="1180" y="80" as="geometry" />
        </mxCell>
        <mxCell id="external-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#7F0000;" value="EXTERNAL (外部服务)" vertex="1">
          <mxGeometry height="40" width="180" x="1180" y="90" as="geometry" />
        </mxCell>
        <mxCell id="llm-providers-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#7F0000;" value="LLM Providers" vertex="1">
          <mxGeometry height="20" width="150" x="1190" y="135" as="geometry" />
        </mxCell>
        <mxCell id="anthropic" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="Anthropic (Claude)" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="160" as="geometry" />
        </mxCell>
        <mxCell id="openai" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="OpenAI (GPT)" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="195" as="geometry" />
        </mxCell>
        <mxCell id="google" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="Google (Gemini)" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="230" as="geometry" />
        </mxCell>
        <mxCell id="deepseek" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="DeepSeek" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="265" as="geometry" />
        </mxCell>
        <mxCell id="ollama" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="Ollama (Local)" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="300" as="geometry" />
        </mxCell>
        <mxCell id="ext-svc-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#7F0000;" value="External Services" vertex="1">
          <mxGeometry height="20" width="150" x="1190" y="345" as="geometry" />
        </mxCell>
        <mxCell id="mcp-servers" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="MCP Servers" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="370" as="geometry" />
        </mxCell>
        <mxCell id="webhooks" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="Webhooks" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="405" as="geometry" />
        </mxCell>
        <mxCell id="third-party" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#C5221F;strokeWidth=1;fontSize=10;fontColor=#7F0000;" value="Third-party APIs" vertex="1">
          <mxGeometry height="30" width="160" x="1190" y="440" as="geometry" />
        </mxCell>
        <mxCell id="infra-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F3F4;strokeColor=#5F6368;strokeWidth=1;arcSize=3;" value="" vertex="1">
          <mxGeometry height="140" width="1520" x="-160" y="780" as="geometry" />
        </mxCell>
        <mxCell id="infra-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#202124;" value="INFRASTRUCTURE (基础设施)" vertex="1">
          <mxGeometry height="40" width="1520" x="-160" y="790" as="geometry" />
        </mxCell>
        <mxCell id="sqlite" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" value="SQLite (Data)" vertex="1">
          <mxGeometry height="30" width="190" x="1120" y="840" as="geometry" />
        </mxCell>
        <mxCell id="filesystem" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" value="FileSystem (Storage)" vertex="1">
          <mxGeometry height="30" width="190" x="910" y="840" as="geometry" />
        </mxCell>
        <mxCell id="config" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" value="Config (Settings)" vertex="1">
          <mxGeometry height="30" width="190" x="700" y="840" as="geometry" />
        </mxCell>
        <mxCell id="logging" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" value="Logging (Unified)" vertex="1">
          <mxGeometry height="30" width="190" x="490" y="840" as="geometry" />
        </mxCell>
        <mxCell id="cache" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" value="Cache (Memory)" vertex="1">
          <mxGeometry height="30" width="190" x="280" y="840" as="geometry" />
        </mxCell>
        <mxCell id="processes" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" value="Process (Spawn/IPC)" vertex="1">
          <mxGeometry height="30" width="190" x="70" y="840" as="geometry" />
        </mxCell>
        <mxCell id="crypto" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5F6368;strokeWidth=1;fontSize=10;fontColor=#202124;" value="Crypto (Keys)" vertex="1">
          <mxGeometry height="30" width="190" x="-140" y="840" as="geometry" />
        </mxCell>
        <mxCell id="conn-gw-agent" edge="1" parent="1" style="endArrow=classic;html=1;strokeColor=#E37400;strokeWidth=2;" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="480" y="400" as="sourcePoint" />
            <mxPoint x="520" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="other-container" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#1A73E8;strokeWidth=1;dashed=1;arcSize=5;" value="" vertex="1">
          <mxGeometry height="135" width="160" y="475" as="geometry" />
        </mxCell>
        <mxCell id="mac-mobile" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="Mac / Mobile Apps" vertex="1">
          <mxGeometry height="30" width="140" x="10" y="425" as="geometry" />
        </mxCell>
        <mxCell id="hooks-cron" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1A73E8;strokeWidth=1;fontSize=11;fontColor=#0D47A1;" value="Hooks / Cron" vertex="1">
          <mxGeometry height="30" width="140" x="10" y="575" as="geometry" />
        </mxCell>
        <mxCell id="conn-entry-gw" edge="1" parent="1" style="endArrow=classic;html=1;strokeColor=#1A73E8;strokeWidth=2;" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="180" y="415" as="sourcePoint" />
            <mxPoint x="220" y="415" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn-agent-ext" edge="1" parent="1" style="endArrow=classic;startArrow=classic;html=1;strokeColor=#C5221F;strokeWidth=2;" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1140" y="300" as="sourcePoint" />
            <mxPoint x="1180" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn-agent-infra" edge="1" parent="1" style="endArrow=classic;html=1;strokeColor=#5F6368;strokeWidth=2;dashed=1;" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="830" y="730" as="sourcePoint" />
            <mxPoint x="830" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
