<mxfile host="65bd71144e">
  <diagram id="e2e" name="End-to-end Minimal">
    <mxGraphModel dx="828" dy="347" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <mxCell id="title" value="Clawdbot End-to-End (Minimal): message → agent → tools → reply" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontStyle=1;fontSize=24;fontColor=#202124;sketch=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="20" width="1000" height="44" as="geometry"/>
        </mxCell>

        <!-- Stage panels -->
        <mxCell id="s_entry" value="1) ENTRY" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#FEEFC3;strokeColor=#E37400;fontColor=#5D4200;fontStyle=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="70" y="110" width="300" height="640" as="geometry"/>
        </mxCell>
        <mxCell id="s_gw" value="2) GATEWAY" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#C6DAFC;strokeColor=#1A73E8;fontColor=#0D47A1;fontStyle=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="400" y="110" width="330" height="640" as="geometry"/>
        </mxCell>
        <mxCell id="s_agent" value="3) AGENT" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#CEEAD6;strokeColor=#188038;fontColor=#0B5323;fontStyle=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="760" y="110" width="380" height="640" as="geometry"/>
        </mxCell>
        <mxCell id="s_infra" value="4) INFRA/TOOLS" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#DADCE0;strokeColor=#5F6368;fontColor=#202124;fontStyle=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="1170" y="110" width="360" height="640" as="geometry"/>
        </mxCell>

        <!-- Entry nodes -->
        <mxCell id="ch" value="Channel\n(Telegram/WA/Discord)" style="ellipse;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=3;fillColor=#F1F3F4;strokeColor=#5F6368;fontColor=#202124;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="110" y="180" width="220" height="80" as="geometry"/></mxCell>
        <mxCell id="ui" value="Control UI\n(CLI/Web)" style="ellipse;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=3;fillColor=#F1F3F4;strokeColor=#5F6368;fontColor=#202124;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="110" y="290" width="220" height="80" as="geometry"/></mxCell>

        <!-- Gateway nodes -->
        <mxCell id="gw" value="Gateway\nWS/HTTP :18789\nmode: local/remote" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#C6DAFC;strokeColor=#1A73E8;fontColor=#0D47A1;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="430" y="210" width="270" height="110" as="geometry"/></mxCell>
        <mxCell id="node" value="Nodes\n(role=node)" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#CEEAD6;strokeColor=#188038;fontColor=#0B5323;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="430" y="350" width="270" height="80" as="geometry"/></mxCell>

        <!-- Agent nodes -->
        <mxCell id="agent" value="Agent runtime\n- session\n- memory\n- provider router" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#CEEAD6;strokeColor=#188038;fontColor=#0B5323;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="800" y="210" width="300" height="110" as="geometry"/></mxCell>
        <mxCell id="loop" value="AI↔Tools loop\n(tool request → hooks → exec → result)" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#FAD2CF;strokeColor=#C5221F;fontColor=#7F0000;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="800" y="350" width="300" height="90" as="geometry"/></mxCell>

        <!-- Infra nodes -->
        <mxCell id="tools" value="Tools\nfile/browser/bash/MCP/skills" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#FEEFC3;strokeColor=#E37400;fontColor=#5D4200;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="1210" y="210" width="280" height="90" as="geometry"/></mxCell>
        <mxCell id="infra" value="Infra\nconfig/logging/sandbox" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;strokeWidth=2;fillColor=#DADCE0;strokeColor=#5F6368;fontColor=#202124;fontStyle=1;fontSize=12;" parent="1" vertex="1"><mxGeometry x="1210" y="330" width="280" height="90" as="geometry"/></mxCell>

        <!-- edges -->
        <mxCell id="e1" value="message" style="edgeStyle=orthogonalEdgeStyle;rounded=1;sketch=1;curveFitting=1;jiggle=2;html=1;strokeWidth=2;strokeColor=#5F6368;" parent="1" source="ch" target="gw" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e2" value="control" style="edgeStyle=orthogonalEdgeStyle;rounded=1;sketch=1;curveFitting=1;jiggle=2;html=1;strokeWidth=2;strokeColor=#5F6368;" parent="1" source="ui" target="gw" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e3" value="events" style="edgeStyle=orthogonalEdgeStyle;rounded=1;sketch=1;curveFitting=1;jiggle=2;html=1;strokeWidth=2;strokeColor=#5F6368;" parent="1" source="gw" target="agent" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e4" value="tool calls" style="edgeStyle=orthogonalEdgeStyle;rounded=1;sketch=1;curveFitting=1;jiggle=2;html=1;strokeWidth=2;strokeColor=#5F6368;" parent="1" source="agent" target="loop" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e5" value="exec" style="edgeStyle=orthogonalEdgeStyle;rounded=1;sketch=1;curveFitting=1;jiggle=2;html=1;strokeWidth=2;strokeColor=#5F6368;" parent="1" source="loop" target="tools" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e6" value="uses" style="edgeStyle=orthogonalEdgeStyle;rounded=1;sketch=1;curveFitting=1;jiggle=2;html=1;strokeWidth=2;dashed=1;strokeColor=#5F6368;" parent="1" source="agent" target="infra" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
